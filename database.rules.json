{
  /* Visit https://firebase.google.com/docs/database/security to learn more about security rules. */
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "relatos": {
      ".read": true,
      ".write": "auth != null",
      ".indexOn": ["dataCriacao", "status"],
      "$relato_id": {
        ".validate": "newData.hasChildren(['titulo', 'tipo', 'descricao', 'coordenadas', 'endereco', 'status', 'dataCriacao', 'usuarioId'])",
        ".write": "auth != null && (root.child('admins').child(auth.uid).exists() || data.child('usuarioId').val() === auth.uid)"
      }
    },
    "admins": {
      ".read": "auth != null",
      ".write": "auth != null",
      "$admin_id": {
        ".validate": "newData.hasChildren(['email'])"
      }
    }
  }
}